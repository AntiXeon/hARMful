# @Author: Denis CARLUS
# @Date:   14-Nov-2016
# @Filename: circle.yml
# @Last modified by:   Denis CARLUS
# @Last modified time: 22-Nov-2016
# @License: GNU GENERAL PUBLIC LICENSE, Version 3, 29 June 2007

test:
    pre:
        # Dependencies for HOPEful (3D engine library)
        - sudo apt-get update; sudo apt-get install freeglut3 freeglut3-dev xorg-dev libglu1-mesa-dev
        # Get the source code from GLFW 3.2.1, compile it and install it.
        - wget https://github.com/glfw/glfw/releases/download/3.2.1/glfw-3.2.1.zip
        - unzip glfw-3.2.1.zip
        - cd glfw-3.2.1 && mkdir build && cd build && cmake .. && make && sudo make install
        # Get the source code from GLEW 2, compile it and install it.
        - wget https://github.com/nigels-com/glew/releases/download/glew-2.0.0/glew-2.0.0.tgz
        - tar zxfv glew-2.0.0.tgz
        - cd glew-2.0.0/build/ && cmake ./cmake && make && sudo make install
    override:
        # Build libraries
        - cd Libraries && cmake . && make
        # Build functional tests and run it
        - cd Softwares/Tests/DOOMful && cmake . && make
        - cd Softwares/Tests/DOOMful/Chrono/bin && ./TestChrono.exe
        - cd Softwares/Tests/DOOMful/LogSystem/bin && ./TestLogSystem.exe
        - cd Softwares/Tests/DOOMful/Profiler/bin && ./TestProfiler.exe
        - cd Softwares/Tests/DOOMful/Random/bin && ./TestRandom.exe
